.search
  = form_tag products_path, method: :get do
    - if params[:query].present?
      = link_to "clear", products_path
    = text_field_tag :query, params[:query], id: "product_search", autocomplete: "on"
    = submit_tag "OK"
.tri
  
%h1 Listing products
%table#sortable.table.table-bordered.table-striped
  - @products.each do |product|
    %tr{"data-item-id" => "<haml_loud"} "\#{product.id}" class="item">
      %td
        = image_tag(product.image_url, class: 'list_image', size: "100x100")
      %td.list_description
        %dl
          %dd= truncate(strip_tags(product.description), length: 80)
          %dd= product.tag_list.collect{|v| v}.join(",")
      %td.list_price
        %dl
          %dd= product.price.to_s + " " + "euros"
      %td.list_weight
        %dl
          %dd= product.weight.to_s + " " + "kg"
          %dd= link_to 'En savoir plus', product
      %td.list_actions
        = link_to 'Show', product
        %br/
        = link_to 'Edit', edit_product_path(product)
        %br/
        = link_to 'Destroy', product, method: :delete, |
          data: { confirm: 'Are you sure?' }           |
%br/
= link_to 'New product', new_product_path

= will_paginate @products